
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.3.0
  creationTimestamp: null
  name: nvmeshes.nvmesh.excelero.com
spec:
  group: nvmesh.excelero.com
  names:
    kind: NVMesh
    listKind: NVMeshList
    plural: nvmeshes
    singular: nvmesh
  scope: Namespaced
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: NVMesh is the Schema for the nvmeshes API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: NVMeshSpec defines the desired state of NVMesh
          properties:
            actions:
              description: Actions allow the user to intiate tasks for the operator to perform
              items:
                properties:
                  args:
                    additionalProperties:
                      type: string
                    description: Arguments for the Action
                    type: object
                  name:
                    description: The type of action to perform
                    type: string
                type: object
              type: array
            core:
              description: Core is an object describing the nvmesh-core deployment
              properties:
                azureOptimized:
                  description: Azure Optimized - Make optimizations for running on Azure cloud
                  type: boolean
                configuredNICs:
                  description: ConfiguredNICs - a comma seperated list of nics to use with NVMesh
                  type: string
                disabled:
                  description: Disabled - if true NVMesh Core will not be deployed
                  type: boolean
                imageRegistry:
                  description: The address of the image registry where the nvmesh core images are stored
                  type: string
                imageVersionTag:
                  description: The version tag of the nvmesh core docker images
                  type: string
                tcpOnly:
                  description: TCP Only - Set to true if cluster support only TCP
                  type: boolean
                version:
                  description: The version of NVMesh Core to be deployed. to perform an upgrade simply update this value to the required version.
                  type: string
              required:
              - version
              type: object
            csi:
              description: CSI is an object describing the nvmesh-csi-driver deployment
              properties:
                controllerReplicas:
                  description: ControllerReplicas describes the number of replicas for the NVMesh CSI Controller Statefulset
                  format: int32
                  minimum: 1
                  type: integer
                disabled:
                  description: Disabled - if true NVMesh CSI Driver will not be deployed
                  type: boolean
                imageName:
                  description: ImageName - Optional, if given will override the default repositroy/image-name
                  type: string
                version:
                  description: Version controls which version of the NVMesh CSI Controller will be deployed. to perform an upgrade simply update this value to the required version.
                  type: string
              type: object
            debug:
              description: Debug - debug options
              properties:
                collectLogsJobsRunForever:
                  type: boolean
                containersKeepRunningAfterFailure:
                  type: boolean
                debugJobs:
                  type: boolean
                imagePullPolicyAlways:
                  type: boolean
              type: object
            management:
              description: Management is an object describing the nvmesh-management deployment
              properties:
                disabled:
                  description: Disabled - if true NVMesh Management will not be deployed
                  type: boolean
                externalIPs:
                  description: The ExternalIP that will be used for the management GUI service LoadBalancer
                  items:
                    type: string
                  type: array
                imageRegistry:
                  description: The address of the image registry where the nvmesh management image is stored
                  type: string
                mongoDB:
                  description: Configuration for deploying a MongoDB cluster"
                  properties:
                    address:
                      description: The MongoDB connection string i.e "mongo-0.mongo.nvmesh.svc.local:27017"
                      type: string
                    external:
                      description: External - if true MongoDB is expected to be already deployed, and MongoAddress should be given, if false - MongoDB will be automatically deployed
                      type: boolean
                    replicas:
                      description: The number of MongoDB replicas in the MongoDB Cluster - This field is ignored if management.mongoDB.external=true
                      format: int32
                      type: integer
                    useOperator:
                      description: If true the NVMesh Operator will deploy a MongoDB Operator and a MongoDB Cluster using a CutomResource
                      type: boolean
                  type: object
                noSSL:
                  description: Disable TLS/SSL on NVMesh-Management websocket and HTTP connections
                  type: boolean
                replicas:
                  description: The number of replicas of the NVMesh Managemnet
                  format: int32
                  minimum: 1
                  type: integer
                version:
                  description: The version of NVMesh Management to be deployed. to perform an upgrade simply update this value to the required version.
                  type: string
              type: object
            operator:
              description: Control the behavior of the NVMesh operator for this NVMesh Cluster
              properties:
                fileServer:
                  properties:
                    address:
                      type: string
                    skipCheckCertificate:
                      type: boolean
                  type: object
                ignorePersistentVolumesOnDelete:
                  description: If IgnorePersistentVolumesOnDelete is true, The operator will allow deleting this cluster when there are NVMesh PersistentVolumes on the cluster. This can lead to an unclean state left on the k8s cluster
                  type: boolean
                ignoreVolumeAttachmentOnDelete:
                  description: If IgnoreVolumeAttachmentOnDelete is true, The operator will allow deleting this cluster when there are active attachments of NVMesh volumes. This can lead to an unclean state left on the k8s cluster
                  type: boolean
                skipUninstall:
                  description: If SkipUninstall is true, The operator will not clear the mongo db or remove files the NVMesh software has saved locally on the nodes. This can lead to an unclean state left on the k8s cluster
                  type: boolean
              type: object
          type: object
        status:
          description: NVMeshStatus defines the observed state of NVMesh
          properties:
            WebUIURL:
              description: The URL of NVMesh Web GUI
              type: string
            actionsStatus:
              additionalProperties:
                additionalProperties:
                  type: string
                type: object
              type: object
            reconcileStatus:
              properties:
                lastUpdate:
                  format: date-time
                  type: string
                reason:
                  type: string
                status:
                  type: string
              type: object
          type: object
      type: object
  version: v1
  versions:
  - name: v1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
